<!DOCTYPE html>
<html dir="ltr" class="client-js" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>ADT/v18 - WoWDev</title>
<meta name="generator" content="MediaWiki 1.24.1">
<link rel="alternate" type="application/x-wiki" title="Edit" href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit">
<link rel="edit" title="Edit" href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit">
<link rel="shortcut icon" href="http://www.pxr.dk/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://www.pxr.dk/wowdev/wiki/opensearch_desc.php" title="WoWDev (en)">
<link rel="EditURI" type="application/rsd+xml" href="http://www.pxr.dk/wowdev/wiki/api.php?action=rsd">
<link rel="alternate" hreflang="x-default" href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18">
<link rel="alternate" type="application/atom+xml" title="WoWDev Atom feed" href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:RecentChanges&amp;feed=atom">
<link rel="stylesheet" href="ADT_v18%20-%20WoWDev_files/load.css">
<!--[if IE 6]><link rel="stylesheet" href="/wowdev/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wowdev/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><style>
.mw-collapsible-toggle{float:right;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mw-customtoggle,.mw-collapsible-toggle{cursor:pointer} caption .mw-collapsible-toggle{float:none} li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
/* cache key: pxr_dk-wikki:resourceloader:filter:minify-css:7:869aa9133c31e6040d4830b259da96a8 */
.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left; overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}.suggestions-result-current{background-color:#4C59A6;color:white}.suggestions-special .special-label{color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white}.highlight{font-weight:bold}
/* cache key: pxr_dk-wikki:resourceloader:filter:minify-css:7:f8d0c6895ce3ae14434c16b8fca59432 */
.postedit-container{margin:0 auto;position:fixed;top:0;height:0;left:50%;z-index:1000;font-size:13px}.postedit-container:hover{cursor:pointer}.postedit{position:relative;top:0.6em;left:-50%;padding:.6em 3.6em .6em 1.1em;line-height:1.5625em;color:#626465;background-color:#f4f4f4;border:1px solid #dcd9d9;text-shadow:0 0.0625em 0 rgba(255,255,255,0.5);border-radius:5px;box-shadow:0 2px 5px 0 #ccc;-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-ms-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.skin-monobook .postedit{top:6em !important}.postedit-faded{opacity:0}.postedit-icon{padding-left:41px;  line-height:25px;background-repeat:no-repeat;background-position:8px 50%}.postedit-icon-checkmark{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABblBMVEUAAAD///////9PfTf///80aRdTgjn///9Feij///////////9Rfzf///////////9PfjZRgDh1o1xOfTb///////+bwYqLtnj///////9PfTa82K////9WhT6YxIL///9QgDdTgzr////////j7uDl7eLq8efi693k7OH///////9UhjuBr2rp9uRUhjr///9YljVKgir///9WiTlYjT3////9/v57vFlbkT5PjC9dlD/5/fhuq09stUTs9uhxuElctCpfnT1huDFloEZloUZmpENmvDZpvDxpvTxqvjxrvT5rvT9rwTxsqktswD5uwkBvuUdxw0NztFBztU9ztVBzwkp0tlJ1xkd2t1R3uVR4w1F4xk54x014yE15uVZ5v1R5xVB6v1R7yFJ8wVh9xVl9yFR9yVd9ylN+xVh+yFd/x1l/yFeAylmEx1+Ny2uY0Hqe04Wj1Ymv3Ze33qLD47TJ5L3O6cPU7Mrq9eb2+/Q4j37OAAAAQHRSTlMAAQIEBAUFBQwPFB4fJCUoKiosQEhJS01RUlZZXmdydXaChYuSlJSWmJmoq6uur8LExcvM19fg5ejt8fX2+Pr7SljgewAAAKpJREFUGBkFwQNCAwAAAMDLtl3LtrG4rWXbtvX77gAgZ6grFwC0bhwNVgKgdPZx8b0dgLi+s7Wn0VoAqpfOI9+BNADZI7fLrz2pSEwGHZuH+78lSK8ZLkLezF3ooyUG3VPXq2USei9WngeyoG195yBYWDF3E/2pAhl1e9Gr8bGT+bfOFCC2fnvh4X7rcqIAQNNu+HT6sxkAjceTL/2ZAIhv+PorBwBJxfkA//dFHSCBy/UTAAAAAElFTkSuQmCC);background-image:url(http://www.pxr.dk/wowdev/wiki/resources/src/mediawiki.action/images/green-checkmark.png?2015-03-19T21:23:20Z)!ie;background-position:left}.postedit-close{position:absolute;padding:0 .8em;right:0;top:0;font-size:1.25em;font-weight:bold;line-height:2.3em;color:black;text-shadow:0 0.0625em 0 white;text-decoration:none;opacity:0.2;filter:alpha(opacity=20)}.postedit-close:hover{color:black;text-decoration:none;opacity:0.4;filter:alpha(opacity=40)}
/* cache key: pxr_dk-wikki:resourceloader:filter:minify-css:7:66f0c78333e642e1d4014e4a85544f38 */</style><style>
.suggestions a.mw-searchSuggest-link,.suggestions a.mw-searchSuggest-link:hover,.suggestions a.mw-searchSuggest-link:active,.suggestions a.mw-searchSuggest-link:focus{color:black;text-decoration:none}.suggestions-result-current a.mw-searchSuggest-link,.suggestions-result-current a.mw-searchSuggest-link:hover,.suggestions-result-current a.mw-searchSuggest-link:active,.suggestions-result-current a.mw-searchSuggest-link:focus{color:white}.suggestions a.mw-searchSuggest-link .special-query{ overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}
/* cache key: pxr_dk-wikki:resourceloader:filter:minify-css:7:ae3fa4570b5ac0c6cf7b3776c8ae4d6f */</style><meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: pxr_dk-wikki:resourceloader:filter:minify-css:7:2e3343ac70c818db6168f5ccd6f7f69c */</style>
<script src="ADT_v18%20-%20WoWDev_files/load_002.php"></script><script src="ADT_v18%20-%20WoWDev_files/load_003.php"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ADT/v18","wgTitle":"ADT/v18","wgCurRevisionId":19096,"wgRevisionId":19096,"wgArticleId":3,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Format"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"ADT/v18","wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":5,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"watchrollback":0,
"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});},{},{});
/* cache key: pxr_dk-wikki:resourceloader:filter:minify-js:7:ab52f6eb1652fbc58fa39bdfdc3926f5 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><script src="ADT_v18%20-%20WoWDev_files/load.php"></script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-ADT_v18 skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">ADT/v18</span></h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From WoWDev</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" dir="ltr" class="mw-content-ltr" lang="en"><p><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT" title="ADT" class="mw-redirect">ADT</a> files contain terrain and object information for map tiles. They have a <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Chunk" title="Chunk">chunked</a> structure just like the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDT" title="WDT">WDT</a> files.
</p><p>A map tile is split up into 16x16 = 256 map chunks. (not the same
 as file chunks, although each map chunk will have its own file 
chunk&nbsp;:) ) So there will be a few initial data chunks to specify 
textures, objects, models, etc. followed by 256 <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a> (mapchunk) chunks&nbsp;:) Each <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a> chunk has a small header of its own, and additional chunks within its data block, following the same id-size-data format.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2><span class="toctoggle">&nbsp;[<a href="#" id="togglelink">hide</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#An_important_note_about_the_coordinate_system_used"><span class="tocnumber">1</span> <span class="toctext">An important note about the coordinate system used</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Map_size.2C_blocks.2C_chunks"><span class="tocnumber">2</span> <span class="toctext">Map size, blocks, chunks</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Introduction"><span class="tocnumber">2.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Map_size"><span class="tocnumber">2.2</span> <span class="toctext">Map size</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#ADT_files_and_blocks"><span class="tocnumber">2.3</span> <span class="toctext">ADT files and blocks</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#split_files_.28Cata.2B.29"><span class="tocnumber">3</span> <span class="toctext">split files (Cata+)</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#MVER_chunk"><span class="tocnumber">4</span> <span class="toctext">MVER chunk</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#MHDR_chunk"><span class="tocnumber">5</span> <span class="toctext">MHDR chunk</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#MCIN_chunk_.28.3CCata.29"><span class="tocnumber">6</span> <span class="toctext">MCIN chunk (&lt;Cata)</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#MTEX_chunk"><span class="tocnumber">7</span> <span class="toctext">MTEX chunk</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#MMDX_chunk"><span class="tocnumber">8</span> <span class="toctext">MMDX chunk</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#MMID_chunk"><span class="tocnumber">9</span> <span class="toctext">MMID chunk</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#MWMO_chunk"><span class="tocnumber">10</span> <span class="toctext">MWMO chunk</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#MWID_chunk"><span class="tocnumber">11</span> <span class="toctext">MWID chunk</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#MDDF_chunk"><span class="tocnumber">12</span> <span class="toctext">MDDF chunk</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#MODF_chunk"><span class="tocnumber">13</span> <span class="toctext">MODF chunk</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#MH2O_chunk_.28WotLK.2B.29"><span class="tocnumber">14</span> <span class="toctext">MH2O chunk (WotLK+)</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#header"><span class="tocnumber">14.1</span> <span class="toctext">header</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#attributes"><span class="tocnumber">14.2</span> <span class="toctext">attributes</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#instances"><span class="tocnumber">14.3</span> <span class="toctext">instances</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#instance_vertex_data"><span class="tocnumber">14.4</span> <span class="toctext">instance vertex data</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#Case_0.2C_Height_and_Depth_data"><span class="tocnumber">14.4.1</span> <span class="toctext">Case 0, Height and Depth data</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Case_1.2C_Height_and_Texture_Coordinate_data"><span class="tocnumber">14.4.2</span> <span class="toctext">Case 1, Height and Texture Coordinate data</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Case_2.2C_Depth_only_data"><span class="tocnumber">14.4.3</span> <span class="toctext">Case 2, Depth only data</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Case_3.2C_Height.2C_Depth_and_Texture_Coordinates"><span class="tocnumber">14.4.4</span> <span class="toctext">Case 3, Height, Depth and Texture Coordinates</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#example.2C_notes"><span class="tocnumber">14.5</span> <span class="toctext">example, notes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="#MCNK_chunk"><span class="tocnumber">15</span> <span class="toctext">MCNK chunk</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#MCVT_sub-chunk"><span class="tocnumber">15.1</span> <span class="toctext">MCVT sub-chunk</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#MCLV_sub-chunk_.28Cata.2B.29"><span class="tocnumber">15.2</span> <span class="toctext">MCLV sub-chunk (Cata+)</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#MCCV_sub-chunk_.28WotLK.2B.29"><span class="tocnumber">15.3</span> <span class="toctext">MCCV sub-chunk (WotLK+)</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#MCNR_sub-chunk"><span class="tocnumber">15.4</span> <span class="toctext">MCNR sub-chunk</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#MCLY_sub-chunk"><span class="tocnumber">15.5</span> <span class="toctext">MCLY sub-chunk</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#MCRF_sub-chunk_.28.3CCata.29"><span class="tocnumber">15.6</span> <span class="toctext">MCRF sub-chunk (&lt;Cata)</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#MCRD_.28Cata.2B.29"><span class="tocnumber">15.7</span> <span class="toctext">MCRD (Cata+)</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#MCRW_.28Cata.2B.29"><span class="tocnumber">15.8</span> <span class="toctext">MCRW (Cata+)</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#MCSH_sub-chunk"><span class="tocnumber">15.9</span> <span class="toctext">MCSH sub-chunk</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#MCAL_sub-chunk"><span class="tocnumber">15.10</span> <span class="toctext">MCAL sub-chunk</span></a>
<ul>
<li class="toclevel-3 tocsection-38"><a href="#Uncompressed_.284096.29"><span class="tocnumber">15.10.1</span> <span class="toctext">Uncompressed (4096)</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Uncompressed_.282048.29"><span class="tocnumber">15.10.2</span> <span class="toctext">Uncompressed (2048)</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Compressed"><span class="tocnumber">15.10.3</span> <span class="toctext">Compressed</span></a>
<ul>
<li class="toclevel-4 tocsection-41"><a href="#Sample_C.2B.2B_code"><span class="tocnumber">15.10.3.1</span> <span class="toctext">Sample C++ code</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-42"><a href="#Blend"><span class="tocnumber">15.10.4</span> <span class="toctext">Blend</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#How_to_render"><span class="tocnumber">15.10.5</span> <span class="toctext">How to render</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-44"><a href="#MCLQ_sub-chunk"><span class="tocnumber">15.11</span> <span class="toctext">MCLQ sub-chunk</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#MCSE_sub-chunk"><span class="tocnumber">15.12</span> <span class="toctext">MCSE sub-chunk</span></a>
<ul>
<li class="toclevel-3 tocsection-46"><a href="#old_one_by_ObscuR_.28for_older_versions.29"><span class="tocnumber">15.12.1</span> <span class="toctext">old one by ObscuR (for older versions)</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-47"><a href="#MCBB_.28MoP.2B.29"><span class="tocnumber">15.13</span> <span class="toctext">MCBB (MoP+)</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#MCMT_.28Cata.2B.29"><span class="tocnumber">15.14</span> <span class="toctext">MCMT (Cata+)</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="#MCDD_.28Cata.3F.2B.29"><span class="tocnumber">15.15</span> <span class="toctext">MCDD (Cata?+)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-50"><a href="#MFBO_chunk_.28BC.2B.29"><span class="tocnumber">16</span> <span class="toctext">MFBO chunk (BC+)</span></a></li>
<li class="toclevel-1 tocsection-51"><a href="#MTXF_chunk_.28WotLK.2B.29"><span class="tocnumber">17</span> <span class="toctext">MTXF chunk (WotLK+)</span></a></li>
<li class="toclevel-1 tocsection-52"><a href="#MTXP_chunk_.28MoP.3F.2B.29"><span class="tocnumber">18</span> <span class="toctext">MTXP chunk (MoP?+)</span></a></li>
<li class="toclevel-1 tocsection-53"><a href="#MBMH_.28MoP.2B.29"><span class="tocnumber">19</span> <span class="toctext">MBMH (MoP+)</span></a></li>
<li class="toclevel-1 tocsection-54"><a href="#MBBB_.28MoP.2B.29"><span class="tocnumber">20</span> <span class="toctext">MBBB (MoP+)</span></a></li>
<li class="toclevel-1 tocsection-55"><a href="#MBNV_.28MoP.2B.29"><span class="tocnumber">21</span> <span class="toctext">MBNV (MoP+)</span></a></li>
<li class="toclevel-1 tocsection-56"><a href="#MBMI_.28MoP.2B.29"><span class="tocnumber">22</span> <span class="toctext">MBMI (MoP+)</span></a></li>
<li class="toclevel-1 tocsection-57"><a href="#MAMP_.28Cata.2B.29"><span class="tocnumber">23</span> <span class="toctext">MAMP (Cata+)</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="An_important_note_about_the_coordinate_system_used">An important note about the coordinate system used</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=1" title="Edit section: An important note about the coordinate system used">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Wow's main coordinate system is really weird but understanding it is 
very important in order to correctly interpret the ADT files. The best 
way to explain it is with screenshots: [<a rel="nofollow" class="external autonumber" href="http://koper.wowpanda.net/WoWScrnShot_031710_161417.jpg">[1]</a>], [<a rel="nofollow" class="external autonumber" href="http://koper.wowpanda.net/WoWScrnShot_031710_161649.jpg">[2]</a>].
</p><p>It's important to remember that:
</p>
<ul><li> Unlike most coordinate systems Z is used for the height, Y is used for the width and X is used for the depth.</li>
<li> Y is "reversed". The more you go to the right (if north is up), the more it decreases.</li>
<li> The center of the axis is in the center of the map.</li>
<li> The top-left corner of the map has X = 17066, Y = 17066</li>
<li> The bottom-right corner of the map has X = -17066, Y = -17066</li>
<li> The bottom-left corner of the map has X = -17006, Y = 17066</li>
<li> The top-right corner of the map has X = 17006, Y = -17066</li></ul>
<p>Just to be absolutely clear, assuming you playing a character that is not flying or swimming and is facing north:
</p>
<ul><li> Forward = D3DXVECTOR3(1, 0, 0);</li>
<li> Right = D3DXVECTOR3(0, -1, 0);</li>
<li> Up = D3DXVECTOR3(0, 0, 1);</li></ul>
<p><br>
This is the coordinate system used internally in all of the network 
packets and on most chunks in ADT files. I believe (but I'm not sure) 
that some chunks in this file use a different coordinate system (in 
particular for objects like M2's or WMO's that don't have an absolute 
position but only a relative one).
MODF and MDDF do indeed use a different coordinate system, even for the 
absolute Position. (Anyone clarify on the reasoning behind this?)
</p><p>Unfortunately though whoever wrote this article decided to use 
yet another coordinate system to explain things, different from Wow's.. 
So it's kind of a mess!
</p>
<h2><span class="mw-headline" id="Map_size.2C_blocks.2C_chunks">Map size, blocks, chunks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=2" title="Edit section: Map size, blocks, chunks">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=3" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>All maps are divided into 64x64 <b>blocks</b> for a total of 4096 (some of which may be unused). Each block are divided into 16x16 <b>chunks</b>
 (not to be confused with for example the file chunks, such as the 
"MHDR" chunk.. Completely different thing!). While like I said blocks 
can be unused, each block will always use all of its 16x16 chunks.
</p>
<h3><span class="mw-headline" id="Map_size">Map size</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=4" title="Edit section: Map size">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Each block is 533.33333 yards long (yes, strange number, but that's 
the way it is). Since like we said above the map is divided into 64x64 
blocks the total X and Y of the map will be 34133.33312 yards (but 
remember that since the center of the axis is at the center of the map, 
the maximum X and Y will be 17066.66656).
</p><p>Since each block has 16x16 chunks, the size of a chunk will be 33.3333 yards.
</p>
<h3><span class="mw-headline" id="ADT_files_and_blocks">ADT files and blocks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=5" title="Edit section: ADT files and blocks">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>There is an .adt file for each existing block. If a block is unused it won't have an .adt file. The file will be: <b>World/Maps/&lt;InternalMapName&gt;/&lt;InternalMapName&gt;_&lt;BlockY&gt;_&lt;BlockX&gt;.adt</b>.
</p>
<ul><li> <b>&lt;InternalMapName&gt;</b> - The second field in Map.dbc</li>
<li> <b>&lt;BlockY&gt;</b> - obtained with the following formula: floor((32 - (y / 533.33333)))</li>
<li> <b>&lt;BlockX&gt;</b> - obtained with the following formula: floor((32 - (x / 533.33333)))</li></ul>
<h2><span class="mw-headline" id="split_files_.28Cata.2B.29">split files (Cata+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=6" title="Edit section: split files (Cata+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Beginning with Cataclysm, ADTs are split into multiple files: .adt 
(root), _tex%d.adt (tex) and _obj%d.adt (obj) with&nbsp;%d being the 
level of detail (0 or 1). Chunks are distributed over the files. To load
 a map, the client loads a set of three and treats them as one. While 
the <a rel="nofollow" class="external text" href="http://mjollna.org/docs/adt.png">distribution schema</a> appears to be quite fixed, the client does not keep the semantics of which file is which and parses them all the same.
</p><p>The main difference content-wise is <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCIN_chunk_.28.3CCata.29" title="ADT" class="mw-redirect">ADT#MCIN_chunk_.28.3CCata.29</a> being gone, and <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">ADT#MCNK_chunk</a> in tex and obj files not having the header it has in root files.
</p>
<h2><span class="mw-headline" id="MVER_chunk">MVER chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=7" title="Edit section: MVER chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: all</li></ul>
<pre>struct MVER {
  uint32_t version;
};
</pre>
<h2><span class="mw-headline" id="MHDR_chunk">MHDR chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=8" title="Edit section: MHDR chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li>
<li><b>Contains offsets relative to &amp;MHDR.data in the file for specific chunks.</b> WoW only takes this for parsing the ADT file.</li></ul>
<pre>struct MHDR {
  enum MHDRFlags {
    mhdr_MFBO = 1,                <i>// contains a MFBO chunk.</i>
    mhdr_northrend = 2,           <i>// is set for some northrend ones.</i>
  };
  uint32_t flags;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCIN_chunk" title="ADT" class="mw-redirect">MCIN</a>* mcin;                     // Cata+: obviously gone. probably all offsets gone.
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MTEX_chunk" title="ADT" class="mw-redirect">MTEX</a>* mtex;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MMDX_chunk" title="ADT" class="mw-redirect">MMDX</a>* mmdx;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MMID_chunk" title="ADT" class="mw-redirect">MMID</a>* mmid;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MWMO_chunk" title="ADT" class="mw-redirect">MWMO</a>* mwmo;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MWID_chunk" title="ADT" class="mw-redirect">MWID</a>* mwid;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MDDF_chunk" title="ADT" class="mw-redirect">MDDF</a>* mddf;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MODF_chunk" title="ADT" class="mw-redirect">MODF</a>* modf;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MFBO_chunk" title="ADT" class="mw-redirect">MFBO</a>* mfbo;                     <i>// this is only set if flags &amp; mhdr_MFBO.</i>
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MH2O_chunk" title="ADT" class="mw-redirect">MH2O</a>* mh2o;
  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MTXF_chunk" title="ADT" class="mw-redirect">MTXF</a>* mtxf;
  uint8_t mamp_value;             // Cata+, explicit MAMP chunk overrides data
  uint8_t padding[3];
  uint32_t unused[3];
} mhdr;
</pre>
<h2><span class="mw-headline" id="MCIN_chunk_.28.3CCata.29">MCIN chunk (&lt;Cata)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=9" title="Edit section: MCIN chunk (&lt;Cata)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><b>Pointers to <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a> chunks and their sizes.</b></li></ul>
<pre>struct MCIN {
  struct MCINEntry {
    <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a>* mcnk;                   <i>// absolute offset.</i>
    uint32_t size;                <i>// the size of the MCNK chunk, this is refering to.</i>
    uint32_t flags;               <i>// these two are always 0. only set in the client.</i>
    uint32_t asyncId;	
  } entries[16*16];
} mcin;
</pre>
<h2><span class="mw-headline" id="MTEX_chunk">MTEX chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=10" title="Edit section: MTEX chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: tex</li>
<li><b>List of textures used for texturing the terrain in this map tile.</b></li></ul>
<pre>struct MTEX {
  char filenames[0];              <i>// zero-terminated strings with complete paths to textures. Referenced in <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MCLY_sub-chunk" title="ADT/v18">MCLY</a>.</i>
};
</pre>
<h2><span class="mw-headline" id="MMDX_chunk">MMDX chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=11" title="Edit section: MMDX chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: obj</li>
<li><b>List of filenames for <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=M2" title="M2">M2</a> models that appear in this map tile.</b></li></ul>
<pre>struct MMDX {
  char filenames[0];              <i>// zero-terminated strings with complete paths to models. Referenced in <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MMID_chunk" title="ADT/v18">MMID</a>.</i>
};
</pre>
<h2><span class="mw-headline" id="MMID_chunk">MMID chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=12" title="Edit section: MMID chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: obj</li>
<li><b>List of offsets of model filenames in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MMDX_chunk" title="ADT" class="mw-redirect">MMDX</a> chunk.</b></li></ul>
<pre>struct MMID {
  uint32_t offsets[0];            <i>// filename starting position in <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MMDX_chunk" title="ADT/v18">MMDX</a> chunk. These entries are getting referenced in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MDDF_chunk" title="ADT/v18">MDDF</a> chunk.</i>
};
</pre>
<h2><span class="mw-headline" id="MWMO_chunk">MWMO chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=13" title="Edit section: MWMO chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: obj</li>
<li><b>List of filenames for <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WMO" title="WMO" class="mw-redirect">WMOs</a> (world map objects) that appear in this map tile.</b></li></ul>
<pre>struct MWMO {
  char filenames[0];              <i>// zero-terminated strings with complete paths to models. Referenced in <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MMID_chunk" title="ADT/v18">MWID</a>.</i>
};
</pre>
<h2><span class="mw-headline" id="MWID_chunk">MWID chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=14" title="Edit section: MWID chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: obj</li>
<li><b>List of offsets of WMO filenames in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MWMO_chunk" title="ADT" class="mw-redirect">MWMO</a> chunk.</b></li></ul>
<pre>struct MWID {
  uint32_t offsets[0];            <i>// filename starting position in <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MWMO_chunk" title="ADT/v18">MWMO</a> chunk. These entries are getting referenced in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MODF_chunk" title="ADT/v18">MODF</a> chunk.</i>
};
</pre>
<h2><span class="mw-headline" id="MDDF_chunk">MDDF chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=15" title="Edit section: MDDF chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: obj</li>
<li><b>Placement information for doodads (<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=M2" title="M2">M2</a> models).</b> Additional to this, the models to render are referenced in each <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MCRF_sub-chunk" title="ADT/v18">MCRF</a> chunk.</li></ul>
<pre>struct MDDF {
  enum MDDFFlags {
    mddf_biodome = 1,             <i>// this sets internal flags to | 0x800 (WDOODADDEF.var0xC).</i>
    mddf_shrubbery = 2,           <i>// the actual meaning of these is unknown to me. maybe biodome is for really big M2s. 6.0.1.18179 seems not to check </i>
                                  for this flag
  };
  struct MDDFEntry { <i>// SMDoodadDef</i>
    uint32_t mmidEntry;           <i>// references an entry in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MMID_chunk" title="ADT" class="mw-redirect">MMID</a> chunk, specifying the model to use.</i>
    uint32_t uniqueId;            <i>// this ID should be unique for all ADTs currently loaded. Best, they are unique for the whole map. Blizzard has </i>
                                  these unique for the whole game.
    float position[3];            <i>// This is relative to a corner of the map. Subtract 17066 from the non vertical values and you should start to see </i>
                                  something that makes sense. You'll 
then likely have to negate one of the non vertical values in whatever 
coordinate 
                                  system you're using to finally move it
 into place.
    float rotation[3];            <i>// degrees. This is not the same coordinate system orientation like the ADT itself! (see history.)</i>
    uint16_t scale;               <i>// 1024 is the default size equaling 1.0f.</i>
    uint16_t flags;               <i>// values from enum MDDFFlags.</i>
  } entries[0];
};
</pre>
<h2><span class="mw-headline" id="MODF_chunk">MODF chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=16" title="Edit section: MODF chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: obj</li>
<li><b>Placement information for <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WMO" title="WMO" class="mw-redirect">WMOs</a>.</b> Additional to this, the WMOs to render are referenced in each <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18#MCRF_sub-chunk" title="ADT/v18">MCRF</a> chunk. <i>(?)</i></li></ul>
<pre>struct MODF {
  enum MODFFlags {
    modf_destroyable = 1,         <i>// set for destroyable buildings like the tower in DeathknightStart. This makes it a server-controllable game object.</i>
    modf_use_lod = 2,             <i>// WoD(?)+: also load _LOD1.WMO for use dependent on distance</i>
  };
  struct MODFEntry {
    uint32_t mwidEntry;           <i>// references an entry in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MWID_chunk" title="ADT" class="mw-redirect">MWID</a> chunk, specifying the model to use.</i>
    uint32_t uniqueId;            <i>// this ID should be unique for all ADTs currently loaded. Best, they are unique for the whole map.</i>
    float position[3];
    float rotation[3];            <i>// same as in <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MDDF_chunk" title="ADT" class="mw-redirect">MDDF</a>.</i>
    float lowerBounds[3];         <i>// these two are position plus the wmo bounding box.</i>
    float upperBounds[3];         <i>// they are used for defining when if they are rendered as well as collision.</i>
    uint16_t flags;               <i>// values from enum MODFFlags.</i>
    uint16_t doodadSet;           <i>// which WMO doodad set is used.</i>
    uint16_t nameSet;             <i>// which WMO name set is used. Used for renaming goldshire inn to northshire inn while using the same model.</i>
    uint16_t padding;             <i>// it reads only a WORD into the WMAPOBJDEF structure for name. I don't know about the rest.</i>
  } entries[0];
};
</pre>
<h2><span class="mw-headline" id="MH2O_chunk_.28WotLK.2B.29">MH2O chunk (WotLK+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=17" title="Edit section: MH2O chunk (WotLK+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li></ul>
<p>Replacement for <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCLQ_chunk" title="ADT" class="mw-redirect">MCLQ</a>, which is still parsed by the client for backwards compatibility.
</p><p>The chunk is seperated in three parts: A header (<tt>SMLiquidChunk</tt>), the data-block (<tt>SMLiquidInstance</tt>)
 and the referenced data from both. Reading it all at once and then 
using the supplied offsets inside is recommended. All offsets are 
relative to the data begin of the chunk. The header is the only part 
with a guaranteed position. All other parts are specified by offsets. 
</p>
<h3><span class="mw-headline" id="header">header</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=18" title="Edit section: header">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The header is a list of 256 entries:
</p>
<pre>struct SMLiquidChunk {
  uint32_t offset_instances;       // points to SMLiquidInstance[layer_count]
  uint32_t layer_count;            // 0 if the chunk has no liquids. If &gt; 1, the offsets will point to arrays.
  uint32_t offset_attributes;      // points to mh2o_chunk_attributes, can be ommitted for all-0
} chunks[16*16];
</pre>
<h3><span class="mw-headline" id="attributes">attributes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=19" title="Edit section: attributes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><tt>chunks[].offset_attributes</tt> points to one of
</p>
<pre>struct mh2o_chunk_attributes {
  uint64_t fishable;               // seems to be usable as visibility information.
  uint64_t deep;
};
</pre>
<h3><span class="mw-headline" id="instances">instances</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=20" title="Edit section: instances">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><tt>chunks[].offset_instances</tt> points to <tt>chunks[].layer_count</tt> entries of
</p>
<pre>struct SMLiquidInstance {
  foreign_key&lt;uint16_t, &amp;<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=LiquidType.dbc" title="LiquidType.dbc">LiquidTypeRec::m_ID</a>&gt; liquid_type;
  foreign_key&lt;uint16_t, &amp;<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=LiquidObject.dbc" title="LiquidObject.dbc">LiquidObjectRec::m_ID</a>&gt; liquid_object;
  float min_height_level;
  float max_height_level;
  uint8_t x_offset;                // The X offset of the liquid square (0-7)
  uint8_t y_offset;                // The Y offset of the liquid square (0-7)
  uint8_t width;                   // The width of the liquid square (1-8)
  uint8_t height;                  // The height of the liquid square (1-8)
  uint32_t offset_exists_bitmap;   // not all tiles in the instances need to be filled. always 8*8 bits.
                                   // offset can be 0 for all-exist. also see (and extend) <a rel="nofollow" class="external autonumber" href="http://sdrv.ms/OH985k">[3]</a>
  uint32_t offset_vertex_data;     // actual data format defined by <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=LiquidMaterial.dbc" title="LiquidMaterial.dbc">LiquidMaterialRec::m_LVF</a> via <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=LiquidType.dbc" title="LiquidType.dbc">LiquidTypeRec::m_materialID</a>
                                   // note: there is a hardcoded check that ocean (liquid_type = 2) is LVF 2 (depth only)
};
</pre>
<h3><span class="mw-headline" id="instance_vertex_data">instance vertex data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=21" title="Edit section: instance vertex data">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Regardless of format, the arrays will always have <tt>(width + 1) * (height + 1)</tt> entries.
</p>
<ul><li> no <tt>heightmap</tt> means that <tt>min/max_height_level</tt> is used for all points.</li>
<li> <tt>depthmap</tt> values are mapped to <tt>[0.0 1.0]</tt> for the shaders.</li></ul>
<pre>struct uv_map_entry {
  uint16_t x;                      // divided by 8 for shaders
  uint16_t y;
};
</pre>
<h4><span class="mw-headline" id="Case_0.2C_Height_and_Depth_data">Case 0, Height and Depth data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=22" title="Edit section: Case 0, Height and Depth data">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This is the go-to layout for pre-WoD (MoP?) data. 
</p>
<pre>struct {
  float heightmap[];
  char depthmap[];
};
</pre>
<h4><span class="mw-headline" id="Case_1.2C_Height_and_Texture_Coordinate_data">Case 1, Height and Texture Coordinate data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=23" title="Edit section: Case 1, Height and Texture Coordinate data">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>struct {
  float heightmap[];
  uv_map_entry uvmap[];
}
</pre>
<p>I couldn't get the UV coordinates to make sense so I ended up disabling them. -- Rour
</p>
<h4><span class="mw-headline" id="Case_2.2C_Depth_only_data">Case 2, Depth only data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=24" title="Edit section: Case 2, Depth only data">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This format is hard coded for liquid type ocean (2).
</p>
<pre>struct {
  char depthmap[];
}
</pre>
<h4><span class="mw-headline" id="Case_3.2C_Height.2C_Depth_and_Texture_Coordinates">Case 3, Height, Depth and Texture Coordinates</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=25" title="Edit section: Case 3, Height, Depth and Texture Coordinates">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>struct {
  float heightmap[];
  uv_map_entry uvmap[];
  char depthmap[];
}
</pre>
<h3><span class="mw-headline" id="example.2C_notes">example, notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=26" title="Edit section: example, notes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The full heightmap that covers a whole chunk would be created from 
9x9 float values, effectively creating 8x8 quadratic pieces. But since 
WotLK and the introduction of the MH2O chunk there is no more need to 
define the full heightmap if only part of a chunk is actually covered 
with water (such as with a thin river). Instead, MH2O_Information.x, .y,
 .width and .height define the size and location of a "liquid rectangle"
 which can be smaller than a full chunk.
</p><p>An example: let's say there's a river crossing a chunk like this ('x' is the river):
</p>
<pre>++++++++
++++++++
xxxxxx++
++xxxxxx
++++++++
++++++++
++++++++
++++++++
</pre>
<p>This would lead to <tt>x_offset</tt> = 0, <tt>y_offset</tt> = 2, <tt>width</tt> = 8 and <tt>height</tt> = 2. The data at <tt>vertex_data.heightmap</tt>
 would then list 27 float values for the height map (a 9x3 height map 
which results in 8x2 quads, as shown in the picture above).
</p><p>The data pointed to by <tt>offset_exists_bitmap</tt> would finally define which of the quads should be rendered. Its length is always <tt>eight</tt>
 bytes, and each byte is a bitmap which contains a 1 for each quad to be
 rendered and a 0 for each invisible quad. In our example this would be 
the following bytes: 0x00 (binary 00000000), 0x00 (binary 00000000), 
0xFC (binary 11111100), 0x3F (binary 00111111), 0x00 (binary 00000000), 
0x00 (binary 00000000), 0x00 (binary 00000000), 0x00 (binary 00000000).
</p><p>Note that it is always possible to omit <tt>offset_exists_bitmap</tt> and/or <tt>offset_vertex_data</tt> to save some bytes in the ADT file! If <tt>offset_attributes</tt> is not given, the whole liquid instance is to be rendered. If <tt>offset_vertex_data</tt>
 is not given, then the height map consists only of values equal to 
heightLevel1 (I am not 100% sure of this one, but this approach seems to
 work fine for me).
</p>
<h2><span class="mw-headline" id="MCNK_chunk">MCNK chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=27" title="Edit section: MCNK chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: header in root, no header in obj and tex</li></ul>
<ul><li><b>After the above mentioned chunks come 256 individual MCNK chunks, row by row, starting from top-left (northwest).</b> The MCNK chunks have a large block of data that starts with a header, and then has sub-chunks of its own.</li></ul>
<p>Each map chunk has 9x9 vertices, and in between them 8x8 additional 
vertices, several texture layers, normal vectors, a shadow map, etc.
</p><p>The <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a> header is 128 bytes large.
</p>
<pre>struct SMChunk <i>// --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Schlumpf&amp;action=edit&amp;redlink=1" class="new" title="User:Schlumpf (page does not exist)">schlumpf_</a> 17:01, 10 August 2009 (CEST), based on: 03-29-2005 By ObscuR, 11-08-2008 by Tharo</i>
{
/*0x000*/  UINT32 flags;
/*0x004*/  UINT32 IndexX;
/*0x008*/  UINT32 IndexY;
/*0x00C*/  UINT32 nLayers;				// maximum 4
/*0x010*/  UINT32 nDoodadRefs;
/*0x014*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCVT_sub-chunk" title="ADT" class="mw-redirect">MCVT</a>* ofsHeight;
/*0x018*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNR_sub-chunk" title="ADT" class="mw-redirect">MCNR</a>* ofsNormal;
/*0x01C*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCLY_sub-chunk" title="ADT" class="mw-redirect">MCLY</a>* ofsLayer;
/*0x020*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCRF_sub-chunk" title="ADT" class="mw-redirect">MCRF</a>* ofsRefs;
/*0x024*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCAL_sub-chunk" title="ADT" class="mw-redirect">MCAL</a>* ofsAlpha;
/*0x028*/  UINT32 sizeAlpha;
/*0x02C*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCSH_sub-chunk" title="ADT" class="mw-redirect">MCSH</a>*
 ofsShadow;				// only with flags&amp;0x1
/*0x030*/  UINT32 sizeShadow;
/*0x034*/  UINT32 areaid;
/*0x038*/  UINT32 nMapObjRefs;
/*0x03C*/  uint16_t holes_low_res;
/*0x03E*/  uint16_t unknown_but_used;
/*0x040*/  UINT2[8][8] ReallyLowQualityTextureingMap;	// It is used to 
determine which detail doodads to show. Values are an array of two bit 
                                                            unsigned 
integers, naming the layer.
/*0x044*/
/*0x048*/
/*0x04C*/
/*0x050*/  UINT32 predTex;				// 03-29-2005 By ObscuR; TODO: Investigate
    ---  WoD:  inlined MCDD chunk begins here
/*0x054*/  UINT32 noEffectDoodad;				// 03-29-2005 By ObscuR; TODO: 
Investigate
/*0x058*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCSE_sub-chunk" title="ADT" class="mw-redirect">MCSE</a>* ofsSndEmitters;
/*0x05C*/  UINT32 nSndEmitters;				//will be set to 0 in the client if ofsSndEmitters doesn't point to <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCSE_sub-chunk" title="ADT" class="mw-redirect">MCSE</a>!
/*0x060*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCLQ_sub-chunk" title="ADT" class="mw-redirect">MCLQ</a>* ofsLiquid;
/*0x064*/  UINT32 sizeLiquid;  			// 8 when not used; only read if &gt;8.
/*0x068*/  Vec3f position;
/*0x06C*/  
/*0x070*/ 
/*0x074*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCCV_sub-chunk" title="ADT" class="mw-redirect">MCCV</a>* ofsMCCV; 				// only with flags&amp;0x40, had UINT32 textureId; in ObscuR's structure.
/*0x078*/  <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCLV_sub-chunk" title="ADT" class="mw-redirect">MCLV</a>* ofsMCLV; 				// introduced in Cataclysm
/*0x07C*/  UINT32 unused; 			                                // currently unused
/*0x080*/
};

enum <i>// 03-29-2005 By ObscuR</i>
{
	FLAG_HAS_MCSH = 0x1,
	FLAG_IMPASS = 0x2,
	FLAG_LQ_RIVER = 0x4,    // FLAG_LQ_ is for legacy MCLQ support. Only 
read if flag is given for type. (which still is the case for some maps)
	FLAG_LQ_OCEAN = 0x8,
	FLAG_LQ_MAGMA = 0x10,
	FLAG_LQ_SLIME = 0x20,
	FLAG_HAS_MCCV = 0x40,
	FLAG_UNKNOWN_0x80 = 0x80, // seen in 6.2.0.20338
	//  0x100 -- not set in 6.2.0.20338
	//  0x200 -- not set in 6.2.0.20338
	//  0x400 -- not set in 6.2.0.20338
	//  0x800 -- not set in 6.2.0.20338
	// 0x1000 -- not set in 6.2.0.20338
	// 0x2000 -- not set in 6.2.0.20338
	// 0x4000 -- not set in 6.2.0.20338
	FLAG_DO_NOT_FIX_ALPHA_MAP = 0x8000, // "fix" alpha maps in MCAL (4 bit 
alpha maps are 63*63 instead of 64*64)
	FLAG_HIGHRES_HOLES = 0x10000, // Since ~5.3 WoW uses full 64-bit to 
store holes for each tile if this flag is set. The holes are a uint64_t 
at 0x14.
	// no further flags as of 6.2.0.20338
};
</pre>
<p><s>The X' and Z' coordinates specify the top left corner of the map 
chunk, but they are in an alternate coordinate system! (yay for 
consistency!) This one has its 0,0 point in the middle of the world, and
 has the axes' directions reversed.
</s></p><s>
<pre>X = 32*533.3333 - X'
Z = 32*533.3333 - Z'
</pre>
</s><p><s>The Y base coordinate acts as a 'zero point' for the height 
values in the upcoming height map - that is, all height values are added
 to this Y height.</s>
</p><p>The X, Y, Z coordinates are in wow's main coordinates system as 
explained above. The struck explanation converts the coordinate system 
to one used by the author but that is never used in wow.
</p><p>About the holes in the terrain: This is a bitmapped field, the 
least significant 16 bits are used row-wise in the following arrangement
 with a 1 bit meaning that the map chunk has a hole in that part of its 
area:
</p>
<pre>	0x1	0x2	0x4	0x8
	0x10	0x20	0x40	0x80
	0x100	0x200	0x400	0x800
	0x1000	0x2000	0x4000	0x8000
</pre>
<p>With this I've been able to fix some holes, the most obvious one 
being the Gates of Ironforge but there are some glitches for some other 
holes like the Lakeshire Inn - maybe this would require the more 
detailed height maps or for me to use a less cheap way to omit the hole 
triangles.&nbsp;:)
</p><p>Since approx. 5.3, WoW uses a new 64-bit hole map if needed. If 
so, flag 0x10000 is set in the MCNK header and the 8 bytes at offset 
chunkBegin+0x14 (ofsHeight and ofsNormal) contain the hole map. 
Otherwise, the low resolution 16-bit hole map is used. See 
MapChunk::CreatePointers and/or <a rel="nofollow" class="external text" href="http://www.ownedcore.com/forums/world-of-warcraft/world-of-warcraft-bots-programs/wow-memory-editing/409718-navmesh-mpq-geometry-parsing-issues.html#post2757020">this post</a>.
Read those 8 bytes as byte array and check for holes like (Holes[row] 
&gt;&gt; col) &amp; 1. If you interpret it as an uint64_t and shift like
 you did before on the 16-bit map, you have to invert the rows because 
of endianness.
</p>
<h3><span class="mw-headline" id="MCVT_sub-chunk">MCVT sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=28" title="Edit section: MCVT sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li></ul>
<pre>struct 
{
  float height[9*9 + 8*8];
} mcvt;
</pre>
<p>These are the actual height values for the 9x9+8x8 vertices. 145 floats in the following order/arrangement:. <b>The values in here are only relative to the position given in the corresponding MCNK chunk.</b>
</p>
<pre>  1    2    3    4    5    6    7    8    9
   10   11   12   13   14   15   16   17
 18   19   20   21   22   23   24   25   26
   27   28   29   30   31   32   33   34
 35   36   37   38   39   40   41   42   43
   44   45   46   47   48   49   50   51
 52   53   54   55   56   57   58   59   60
   61   62   63   64   65   66   67   68
 69   70   71   72   73   74   75   76   77
   78   79   80   81   82   83   84   85
 86   87   88   89   90   91   92   93   94
   95   96   97   98  99  100  101  102
103  104  105  106  107  108  109  110  111
  112  113  114  115  116  117  118  119
120  121  122  123  124  125  126  127  128
  129  130  131  132  133  134  135  136
137  138  139  140  141  142  143  144  145
</pre>
<p><del>The inner 8 vertices are only rendered in WoW when its using the up-close LoD. Otherwise, it only renders the outer 9.</del> Nonsense? If I only change one of these it looks like: <a rel="nofollow" class="external autonumber" href="http://imagr.eu/upload/WoWScrnShot_022409_204540.jpg">[4]</a>.
</p><p>Ok, after a further look into it, WoW uses Squares out of 4 of 
the Outer(called NoLoD)-Vertices with one of the Inner(called 
LoD)-Vertices in the Center:
</p>
<pre>  1    2
   10
 18   19
</pre>
<p>So to render them in OpenGL you can use something like this:
</p>
<pre>  gl.glBegin(GL.GL_TRIANGLE_STRIP);
  for(int x=0;x&lt;8;x++){
    for(int y=0;y&lt;8;y++){
  	float nL1=mcvt.getValNoLOD(x, y);
  	float nL2=mcvt.getValNoLOD(x, y+1);
  	float nL3=mcvt.getValNoLOD(x+1, y);
  	float nL4=mcvt.getValNoLOD(x+1, y+1);
  	float L=mcvt.getValLOD(x, y);
  
  	gl.glVertex3f( y, x, nL1);
  	gl.glVertex3f( y+1, x, nL2);
  	gl.glVertex3f(y+0.5f, x+0.5f, L);
  
  	gl.glVertex3f( y, x, nL1);
  	gl.glVertex3f( y, x+1,nL3);
  	gl.glVertex3f(y+0.5f, x+0.5f,L);
  
  	gl.glVertex3f( y, x+1, nL3);
  	gl.glVertex3f( y+1, x+1, nL4);
  	gl.glVertex3f(y+0.5f, x+0.5f,L);
  
  	gl.glVertex3f( y+1, x,nL2);
  	gl.glVertex3f( y+1, x+1, nL4);
  	gl.glVertex3f(y+0.5f, x+0.5f, L);
  
    }
  }		
  gl.glEnd();
</pre>
<p>Although it seems there is still a mistake&nbsp;:/
--<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Tigurius&amp;action=edit&amp;redlink=1" class="new" title="User:Tigurius (page does not exist)">Tigurius</a>
</p><p>Old ones:
</p><p>To stripify try this one: ( stripsize is now&nbsp;: 16*18 + 7*2 + 8*2 )
</p>
<pre>void stripify(V *in, V *out)
{
	for (int row=0; row&lt;8; row++) { 
		V *thisrow = &amp;in[row*9*2];
		V *nextrow = &amp;in[row*9*2 + 9];
		V *overrow = &amp;in[(row+1)*9*2];
		if (row&gt;0) *out++ = thisrow[0];// jump end
		for (int col=0; col&lt;8; col++) {
			*out++ = thisrow[col];
			*out++ = nextrow[col];
		}
		*out++ = thisrow[8];
		*out++ = overrow[8];
		*out++ = overrow[8];// jump start
		*out++ = thisrow[0];// jump end
		*out++ = thisrow[0];
		for (int col=0; col&lt;8; col++) {
			*out++ = overrow[col];
 			*out++ = nextrow[col];
		}
		if (row&lt;8) *out++ = overrow[8];
		if (row&lt;7) *out++ = overrow[8];// jump start
	}
}
</pre>
<p>or try this one (made by tharo)
</p>
<pre>// to make it not TOO complicated u get data as 9*9 and 8*9 chain. 
// the 9th value is never used but calculation is more easy now ^^
private int stripify(Point3d[] in, Point3d[] out) {
     int outc=0;
     		
     for (int row=0; row&lt;8; row++) {
           int thisrow = row*9*2;
           int nextrow = row*9*2 + 9;
           int overrow = (row+1) *9*2;
     			
           for(int col=0; col&lt;8; col++) {
                 out[outc++] = in[thisrow+col];
                 out[outc++] = in[nextrow+col]; 
           }
           out[outc++] = in[thisrow+8];
     			
           for(int col=8; col&gt;0; col--) {
                 out[outc++] = in[overrow+col];
                 out[outc++] = in[nextrow+col-1]; 
           }
           out[outc++] = in[overrow];
           out[outc++] = in[thisrow];
           out[outc++] = in[nexttow];
           out[outc++] = in[overrow];
     }
     for(int row=8; row&gt;=0; row--) {
           out[outc++] = in[row*9*2];
     }		
     return outc;
}
</pre>
<p>These points look like they might be better organized as a triangle fan instead of a strip.  This is my untested guess:
</p>
<pre>float wowData[145];
int off = 9;
float x, y;

for (y = 0; y &lt; 8; ++y, off += 9)
{
    for (x = 0; x &lt; 8; ++x, ++off)
    {
        glBegin(GL_TRIANGLE_FAN);
            glVertex3f(x, y, wowData[off]);
            glVertex3f(x - 0.5f, y - 0.5f, wowData[off - 9]);
            glVertex3f(x + 0.5f, y - 0.5f, wowData[off - 8]);
            glVertex3f(x + 0.5f, y + 0.5f, wowData[off + 9]);
            glVertex3f(x - 0.5f, y + 0.5f, wowData[off + 8]);
            glVertex3f(x - 0.5f, y - 0.5f, wowData[off - 9]);
        glEnd();
    }
}
</pre>
<p>--<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Kelmar&amp;action=edit&amp;redlink=1" class="new" title="User:Kelmar (page does not exist)">Kelmar</a>
</p>
<h3><span class="mw-headline" id="MCLV_sub-chunk_.28Cata.2B.29">MCLV sub-chunk (Cata+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=29" title="Edit section: MCLV sub-chunk (Cata+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li></ul>
<pre>struct
{
  CArgb values[9*9 + 8*8]; // or rgba?
} chunk_lighting;
</pre>
<p>Alpha is apparently ignored. Heavily used in Deepholm. In contrast to MCCV does not only color but also <a rel="nofollow" class="external text" href="http://mjollna.org/docs/mclv.jpg">lightens up the vertices</a>.
</p>
<h3><span class="mw-headline" id="MCCV_sub-chunk_.28WotLK.2B.29">MCCV sub-chunk (WotLK+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=30" title="Edit section: MCCV sub-chunk (WotLK+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li>
<li><b>This is used for vertex shading.</b> You can manipulate the color
 of the vertices by adding this layer of colors blended onto the 
terrain. You can see the effects of this in <a rel="nofollow" class="external text" href="http://www.youtube.com/watch?v=3FjuEPnuKtU">this video</a> (see 3:25 to 3:45) from Blizzcon 09. Additionally, there is a <a rel="nofollow" class="external text" href="http://imagr.eu/upload/WoWScrnShot_092409_003328.jpg">screenshot</a> showing some of the effects possible. </li></ul>
<pre>struct MCCV {
  struct MCCVEntry {
    uint8_t red;                  <i>// these values range from 0x00 to 0xFF with 0x7F being the default.</i>
    uint8_t green;                <i>// you can interpret the values as 0x7F being 1.0 and these values being multiplicated with the vertex colors.</i>
    uint8_t blue;                 <i>// setting all values to 0x00 makes a chunk completely black.</i>
    uint8_t alpha;                <i>// seems not to have any effect.</i>
  } entries[9*9+8*8];
};
</pre>
<p>Probably argb, not rgba? --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Schlumpf&amp;action=edit&amp;redlink=1" class="new" title="User:Schlumpf (page does not exist)">Schlumpf</a> (<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User_talk:Schlumpf" title="User talk:Schlumpf">talk</a>) 17:05, 26 July 2015 (UTC)
</p>
<h3><span class="mw-headline" id="MCNR_sub-chunk">MCNR sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=31" title="Edit section: MCNR sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li>
<li><b>Normal vectors for each corresponding vector above.</b> Its followed by some weird unknown data which is not included in the chunk itself and might be some edge flag bitmaps.</li></ul>
<pre>struct MCNR {
  struct MCNREntry {
    int8_t normal[3];             <i>// normalized. X, Z, Y. 127 == 1.0, -127 == -1.0.</i>
  } entries[9*9+8*8];
};
uint8_t unknown[3*3+2*2];         <i>// this data is not included in the MCNR chunk but additional data which purpose is unknown.</i>
                                  <i>// <b>always</b> 0 112 245  18 0  8 0 0  0 84  245 18 0. Nobody yet found a different pattern. The data is <b>not</b> derived from the normals.</i>
                                  <i>// It also does not seem that the client reads this data. --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Schlumpf&amp;action=edit&amp;redlink=1" class="new" title="User:Schlumpf (page does not exist)">Schlumpf</a> (<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User_talk:Schlumpf" title="User talk:Schlumpf">talk</a>) 23:01, 26 July 2015 (UTC)</i>
</pre>
<h3><span class="mw-headline" id="MCLY_sub-chunk">MCLY sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=32" title="Edit section: MCLY sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: tex</li></ul>
<p><i>Complete and right as of 19-AUG-09 (3.0.9 or higher)</i>
</p>
<ul><li><b>Texture layer definitions for this map chunk. 16 bytes per layer, up to 4 layers.</b> </li></ul>
<p>Every texture layer other than the first will have an alpha map to 
specify blending amounts. The first layer is rendered with full opacity.
 To know which alphamap is used, there is an offset into the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCAL_chunk" title="ADT" class="mw-redirect">MCAL</a> chunk. That one is relative to MCAL.
</p><p>You can animate these by setting the flags. Only simple linear 
animations are possible. You can specify the direction in 45° steps and 
the speed.
</p><p>The textureId is just the array index of the filename array in the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MTEX_chunk" title="ADT" class="mw-redirect">MTEX</a> chunk.
</p><p>For getting the right feeling when walking, you should set the effectId which links to <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=GroundEffectTexture.dbc" title="GroundEffectTexture.dbc">GroundEffectTexture.dbc</a>.
 It defines the little detail doodads as well as the footstep sounds and
 if footprints are visible. You can set the id to -1 (int16!) to have no
 detail doodads and footsteps at all. Also, you need to define the 
currently on-top layer in the MCNK structure for the correct detail 
doodads to show up!
</p><p>Introduced in Wrath of the Lich King, terrain can now reflect a 
skybox. This is used for icecubes made out of ADTs to reflect something.
 You need to have the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MTXF_chunk" title="ADT" class="mw-redirect">MTXF</a> chunk in, if you want that. Look at an skybox Blizzard made to see how you should do it.
</p>
<pre>struct SMLayer <i>// 03-29-2005 By ObscuR, --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Schlumpf&amp;action=edit&amp;redlink=1" class="new" title="User:Schlumpf (page does not exist)">schlumpf_</a> 19:47, 19 August 2009 (CEST)</i>
{
  uint32_t textureId; 
  uint32_t flags;		
  uint32_t offsetInMCAL;
  foreign_key&lt;uint32_t, &amp;<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=GroundEffectTexture.dbc" title="GroundEffectTexture.dbc">GroundEffectTextureRec</a>::m_ID&gt; effectId;     // 0xFFFFFFFF for none	
} MCLY[/* &lt;= 4 */];
</pre>
<table>
<tbody><tr>
<td>
</td>
<th width="70"> Flag
</th>
<th width="600"> Description
</th></tr>
<tr>
<td></td>
<td> <i>0x001</i> </td>
<td> Animation: Rotate 45° clockwise.
</td></tr>
<tr>
<td></td>
<td> <i>0x002</i> </td>
<td> Animation: Rotate 90° clockwise.
</td></tr>
<tr>
<td></td>
<td> <i>0x004</i> </td>
<td> Animation: Rotate 180° clockwise.
</td></tr>
<tr>
<td></td>
<td> <i>0x008</i> </td>
<td> Animation: Make this faster.
</td></tr>
<tr>
<td></td>
<td> <i>0x010</i> </td>
<td> Animation: Faster!!
</td></tr>
<tr>
<td></td>
<td> <i>0x020</i> </td>
<td> Animation: Faster!!!!
</td></tr>
<tr>
<td></td>
<td> <i>0x040</i> </td>
<td> Animation: Animate this texture as told in the other bits.
</td></tr>
<tr>
<td></td>
<td> <i>0x080</i> </td>
<td> This will make the texture way brighter. Used for lava to make it "glow".
</td></tr>
<tr>
<td></td>
<td> <i>0x100</i> </td>
<td> Use alpha map - set for every layer after the first
</td></tr>
<tr>
<td></td>
<td> <i>0x200</i> </td>
<td> Alpha map is compressed (see MCAL chunk description)
</td></tr>
<tr>
<td></td>
<td> <i>0x400</i> </td>
<td> This makes the layer behave like its a reflection of the skybox. See below
</td></tr>
<tr>
<td></td>
<td> <i>0x800</i> </td>
<td>&nbsp;??? (WoD?) something scaling
</td></tr>
<tr>
<td></td>
<td> <i>0x1000</i> </td>
<td>&nbsp;??? (WoD?) something scaling
</td></tr></tbody></table>
<p><br>
</p>
<ul><li>Explanation for flag <b>0x400</b>:</li></ul>
<p>First of all you can see the effects in this video: <a rel="nofollow" class="external text" href="http://www.youtube.com/watch?v=uOE9OIG_rFM">Video</a>  The texture that became the 0x400 flag was the following: <a rel="nofollow" class="external text" href="http://www.imagr.eu/up/4b795c7c7f36b_TCB_CrystalSong_B.jpg">Image</a>
 . Have a look at the bright points that wander with the toon as it 
moves. This should imitate the stars from the sky (that you can find in 
the texture).
</p><p>There are some important things you should be aware when using the flag 0x400:
</p>
<ul><li>It doesnt matter for which layer you set the flag 0x400, it will always affect the groundlayer. </li>
<li>The common skyboxtextures need to have the same ration from width 
and height as the one posted above. If this isnt the case, it looks like
 that: <a rel="nofollow" class="external text" href="http://www.youtube.com/watch?v=YJDB6OEyxoc">Video</a>  You see that it doesnt really fit the shape.</li>
<li>All of the skyboxtextures blizzard has need to specify a special flag to be decompressed correctly. This is done using the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MTXF_chunk" title="ADT" class="mw-redirect">MTXF</a>-chunk. If the texture has a 1 in MTXF it will be interpreted correctly, else it will be green.</li></ul>
<p>--<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Cromon&amp;action=edit&amp;redlink=1" class="new" title="User:Cromon (page does not exist)">Cromon</a>
</p>
<h3><span class="mw-headline" id="MCRF_sub-chunk_.28.3CCata.29">MCRF sub-chunk (&lt;Cata)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=33" title="Edit section: MCRF sub-chunk (&lt;Cata)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li><b>A list of with MCNK.nDoodadRefs + MCNK.nMapObjRefs indices into the file's <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MDDF_chunk" title="ADT" class="mw-redirect">MDDF</a> and <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MODF_chunk" title="ADT" class="mw-redirect">MODF</a> chunks,</b> saying which <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a> subchunk those particular doodads and objects are drawn within. This <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCRF_sub-chunk" title="ADT" class="mw-redirect">MCRF</a> list contains duplicates for map doodads that overlap areas. </li>
<li> replaced with MCRD and MCRW in Cataclysm</li></ul>
<p>As both, WMOs and M2s are referenced here, they get doodad indices 
first, then WMOs. If you have a doodad and a WMO in the ADT as well as 
the MCNK, you will have a {0,0} in MCRF with nDoodadRefs and 
MCNK.nMapObjRefs being 1.
</p><p>The client uses those MCRF-entries to calculate collision. Only 
objects which are referenced in the current chunk of the toon get 
checked against collision (this is only for MDX, WMO seem to have 
different collision). If a doodad entry from MDDF or MODF gets never 
referenced in a chunks MCRF it wont be drawn at all, WoW doesnt take the
 MDDF and MODF to draw the objects. 
</p><p>--<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Cromon&amp;action=edit&amp;redlink=1" class="new" title="User:Cromon (page does not exist)">Cromon</a>
</p>
<h3><span class="mw-headline" id="MCRD_.28Cata.2B.29">MCRD (Cata+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=34" title="Edit section: MCRD (Cata+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: obj</li></ul>
<pre>uint32_t mddf_entry[];
</pre>
<h3><span class="mw-headline" id="MCRW_.28Cata.2B.29">MCRW (Cata+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=35" title="Edit section: MCRW (Cata+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: obj</li></ul>
<pre>uint32_t modf_entry[];
</pre>
<h3><span class="mw-headline" id="MCSH_sub-chunk">MCSH sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=36" title="Edit section: MCSH sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: tex</li></ul>
<ul><li><b>Shadow map for static shadows on the terrain.</b> Can be left out with the chunk&amp;1 flag not set.</li></ul>
<pre>struct {
  uint1_t shadow_map[64][64];
} mcsh;
</pre>
<p>Thanks to Sylvain, the shadow maps work as follows: the shadows are 
stored per bit, not byte as 0 or 1 (off or on) so we have 8 bytes (which
 equates to 64 values) X 64 bytes (64 values in this case) which ends up
 as a square 64x64 shadowmap with either white or black. Note that the 
shadow values come LSB first.
</p>
<h3><span class="mw-headline" id="MCAL_sub-chunk">MCAL sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=37" title="Edit section: MCAL sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: tex</li>
<li><b>Alpha maps for additional texture layers.</b> </li></ul>
<p>There are 3 kinds of alpha maps here: Which one depends on <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCLY_sub-chunk" title="ADT" class="mw-redirect">MCLY</a> (0x200) and <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDT#MPHD_chunk" title="WDT">WDT's MPHD</a> (0x4 and 0x80) flags.
</p>
<table border="1">
<tbody><tr>
<th> <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCLY_sub-chunk" title="ADT" class="mw-redirect">MCLY</a> </th>
<th> <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDT#MPHD_chunk" title="WDT">WDT's MPHD</a> </th>
<th> mode
</th></tr>
<tr>
<td> </td>
<td> </td>
<td> Uncompressed (2048)
</td></tr>
<tr>
<td align="center"> 0x200 set </td>
<td> </td>
<td> Compressed
</td></tr>
<tr>
<td> </td>
<td align="center"> 0x4 or 0x80 set </td>
<td> Uncompressed (4096)
</td></tr>
<tr>
<td align="center"> 0x200 set </td>
<td align="center"> 0x4 or 0x80 set </td>
<td> Compressed: MPHD is only about bit depth!
</td></tr></tbody></table>
<p>Additionally to this, <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT#MCNK_chunk" title="ADT" class="mw-redirect">MCNK</a> can have (and mostly does have) the 0x8000 flag. If this flag is set and bit depth is 8 (<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDT#MPHD_chunk" title="WDT">WDT's MPHD</a>
 has either flag), then modify alpha values so that if there is shadow 
at the corresponding position, the alpha value is multiplied by 0.7f 
(178 * alpha &gt;&gt; 8 to be exact).
</p>
<h4><span class="mw-headline" id="Uncompressed_.284096.29">Uncompressed (4096)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=38" title="Edit section: Uncompressed (4096)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>uint8_t alpha_map[64][64];
</pre>
<p>For 4096 byte chunks, just read the values straight into your alpha 
channel. This, again, should result in 4096 bytes for a 64px by 64px 
size in the final alpha map.
</p>
<h4><span class="mw-headline" id="Uncompressed_.282048.29">Uncompressed (2048)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=39" title="Edit section: Uncompressed (2048)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>uint4_t alpha_map[64][64]; // need to be normalized by shifting 
left and filling the lower nibble: (alpha &lt;&lt; 4) | 0xF. (0 = 0xF, 1
 = 0x1F, …, 15 = 0xFF) (this means that there are no zero-value 
entries?! the alternative would be multiplying by 17, which seems 
right-ish.)
</pre>
<p>Contains 2048 bytes of data, but each byte contains two values in LSB
 first order. This should result in a 4096 alpha map (64px by 64px).
</p>
<ul><li> Read a byte.</li>
<li> Split the byte into two 4-bit values. eg: b0101b a0101a</li>
<li> This results in 16 possible values for each pixel; 15 is full alpha
 and 0 is no alpha. If you want to normalize, multiply by 17 to get 
0-255 values.</li>
<li> Record each value separately into the alpha channel in the order of a then b.</li></ul>
<p>Not that depending on MCNK flag FLAG_DO_NOT_FIX_ALPHA_MAP, this is 
not actually a 64*64 map but rather a 63*63 map with the last row and 
column being equivalent to the previous one. 
</p>
<pre> struct { uint4_t alpha_map[63]; uint4_t ignored; }[63]; 
 uint4_t ignored[64];
</pre>
<p>where 
</p>
<pre>alpha_map[x][63] == alpha_map[x][62]
alpha_map[63][x] == alpha_map[62][x]
alpha_map[63][63] == alpha_map[62][62]
</pre>
<p>and all "ignored" values are ignored, while still preserving the 2048 byte footprint.
</p>
<ul><li> I claim that this shall be handled by saving in fixed4444 only 
(i.e. always set mcnk.flags FLAG_DO_NOT_FIX_ALPHA_MAP and explicitly 
save the "fixed" (as in have all values) version). --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Schlumpf&amp;action=edit&amp;redlink=1" class="new" title="User:Schlumpf (page does not exist)">Schlumpf</a> (<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User_talk:Schlumpf" title="User talk:Schlumpf">talk</a>) 21:45, 24 October 2015 (UTC)</li></ul>
<h4><span class="mw-headline" id="Compressed">Compressed</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=40" title="Edit section: Compressed">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>struct
{
  enum class mode_t
  {
    copy = 0,              // append value[0..count - 1]
    fill = 1,              // append value[0] count times
  };
  uint8_t mode&nbsp;: 1;
  uint8_t count&nbsp;: 7;
  uint8_t value[];
} compressed_alpha_map[];  // size depends on content. will decompress to exactly 64*64 bytes.
                           // minimum size is 32 times copy-127-x plus one copy-32-x, thus 66 bytes
                           // maximum size is 32 times fill-127-x[127] plus one fill-32-x[127], thus 4129 bytes
</pre>
<ul><li> read a byte</li>
<li> in the first bit of that byte (sign bit) check if it's true. When true that means we are in "fill" mode, if false, "copy" mode</li>
<li> the next 7 bits of the byte determine how many times we "fill" or "copy" (count) (eg, max value 127)</li>
<li> fill mode: repeat the byte following the one we just read *count* number of times into the alpha map</li>
<li> copy mode: read *count* number of following bytes into the alpha map</li>
<li> repeat until the map is complete</li></ul>
<p>Notes:
</p>
<ul><li> this should result in 4096 bytes in the alpha map (64 px by 64 px)</li>
<li> you should not have any extra compression data left over after completion</li>
<li> reads left to right, top to bottom</li></ul>
<p>-- Michael Redig 25-5-2015
</p><p>-- <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Flow&amp;action=edit&amp;redlink=1" class="new" title="User:Flow (page does not exist)">Flow</a> 21-10-2008
</p>
<h5><span class="mw-headline" id="Sample_C.2B.2B_code">Sample C++ code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=41" title="Edit section: Sample C++ code">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<pre>unsigned offI = 0; //offset IN buffer
unsigned offO = 0; //offset OUT buffer
char* buffIn; // pointer to data in adt file
char buffOut[4096]; // the resulting alpha map

while( offO &lt; 4096 )
{
  // fill or copy mode
  bool fill = buffIn[offI] &amp; 0x80;
  unsigned n = buffIn[offI] &amp; 0x7F;
  offI++;
  for( unsigned k = 0; k &lt; n; k++ )
  {
    if (offO == 4096) break;
    buffOut[offO] = buffIn[offI];
    offO++;
    if(&nbsp;!fill )
      offI++;
  }
  if( fill ) offI++;
}
</pre>
<h4><span class="mw-headline" id="Blend">Blend</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=42" title="Edit section: Blend">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Blizzard has changed the way how the additional textures are blended 
onto the ground texture in Northrend (old continents still seem to be 
blended the old way; they also don't use the new alpha map format). They
 have gone from a "one-layer-per-step" approach to blending all the 4 
textures in a single step according to the following formula:
</p>
<pre>finalColor = tex0 * (1.0 - (alpha1 + alpha2 + alpha3)) + tex1 * alpha1 + tex2 * alpha2 + tex3 * alpha3
</pre>
<p>So all the alpha values for the different layers including the ground
 layer add up to 1.0; the ground layer's alpha value is calculated to 
match this constraint.
</p><p>-- <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Slartibartfast&amp;action=edit&amp;redlink=1" class="new" title="User:Slartibartfast (page does not exist)">Slartibartfast</a> 01-11-2008
</p>
<h4><span class="mw-headline" id="How_to_render">How to render</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=43" title="Edit section: How to render">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>It is of course possible to devise different ways to render such 
terrain; one way I use and of which I know that it's working is a 
2-pass-approach: first render all ground textures without blending, then
 use a fragment shader program to mix the 1-3 additional layer textures 
and render them with a glBlendFunc setting of (GL_ONE, 
GL_ONE_MINUS_SRC_ALPHA) on top of the ground texture already present in 
the framebuffer. The fragment program that mixes the textures would have
 to work like this short GLSL example:
</p>
<pre>gl_FragColor =   texture2D(texture0, vec2(gl_TexCoord[0])) * texture2D(texture3, vec2(gl_TexCoord[3])).r
               + texture2D(texture1, vec2(gl_TexCoord[1])) * texture2D(texture3, vec2(gl_TexCoord[3])).g
               + texture2D(texture2, vec2(gl_TexCoord[2])) * texture2D(texture3, vec2(gl_TexCoord[3])).b;
</pre>
<p>(this example uses 4 texture units: texture0 - texture3; the first 3 
of them contain the actual textures, while the fourth unit contains the 
alpha maps combined in one RGB texture)
</p><p>Also, seems like alpha textures are upscaled using bicubic interpolation. --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Deamon&amp;action=edit&amp;redlink=1" class="new" title="User:Deamon (page does not exist)">Deamon</a> (<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User_talk:Deamon&amp;action=edit&amp;redlink=1" class="new" title="User talk:Deamon (page does not exist)">talk</a>) 21:49, 11 October 2015 (UTC)
</p>
<h3><span class="mw-headline" id="MCLQ_sub-chunk">MCLQ sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=44" title="Edit section: MCLQ sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li></ul>
<ul><li><b>Water levels for this map chunk.</b> This chunk is old and 
not really used anymore. Still, there is backwards compatibility in the 
client as old ADTs are not updated as it would be much data to patch it.
 I guess, it will be done in some expansion. You can fully use this 
chunk, even to have multiple water. You can have a lot of stacked water 
with this and the MH2O one. </li>
<li><b>Deprecated with WotLK</b>: I advise you to implement the MH2O one as its better if you want to write a editor for ADT files. </li></ul>
<p>The size of the chunk is in the mapchunk header. The type of liquid is given in the mapchunk flags, also in the header. 
</p><p>This information is old and incomplete as well as maybe wrong. 
</p><p>The first two floats specify the minimum and maximum liquid 
height level. After them comes a 9x9 height map for the water with the 
following format per vertex:
</p>
<pre><b>Offset 	Type 	Description</b>
0x00 	int16 	?
0x02 	int16 	?
0x04 	float 	height value
</pre>
<p>The unknown int values might be color or transparency info, or something entirely different... Most frequently they are 0.
</p><p>Followed by 8x8 bytes of flags for every liquid "tile" between 
the 9x9 vertex grid. The value 0x0F means do not render. (the specific 
flag for this seems to be 8 but I'm not sure - but it fixes some places 
where there was extra "water" sticking into the rest of the scenery)
</p><p>Finally, 0x54 bytes of additional data, no idea what it's used for.
</p>
<h3><span class="mw-headline" id="MCSE_sub-chunk">MCSE sub-chunk</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=45" title="Edit section: MCSE sub-chunk">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li>
<li><b>Sound emitters.</b></li></ul>
<p>This seems to be a bit different to that structure, ObscuR posted 
back then. From what I can see, WoW takes only 0x1C bytes per entry. 
Quite a big difference. This change might have happened, when they 
introduced the <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=SoundEntriesAdvanced.dbc" title="SoundEntriesAdvanced.dbc">SoundEntriesAdvanced.dbc</a>.
</p>
<pre>struct CWSoundEmitter <i>// --<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=User:Schlumpf&amp;action=edit&amp;redlink=1" class="new" title="User:Schlumpf (page does not exist)">schlumpf_</a> 21:44, 8 August 2009 (CEST)</i>
{
/*000h*/  uint32 <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=SoundEntriesAdvanced.dbc" title="SoundEntriesAdvanced.dbc">SoundEntriesAdvancedId</a>;
/*004h*/  Vec3F position;
/*008h*/  
/*00Ch*/  
/*010h*/  Vec3F size; 					// I'm not really sure with this. I'm far too lazy to analyze this. Seems like 
                                                           noone ever needed these anyway.
/*014h*/  
/*018h*/  
} MCSE[];
</pre>
<h4><span class="mw-headline" id="old_one_by_ObscuR_.28for_older_versions.29">old one by ObscuR (for older versions)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=46" title="Edit section: old one by ObscuR (for older versions)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>struct CWSoundEmitter <i>// 04-29-2005 By ObscuR (Maybe not accurate but should look like this&nbsp;:p )</i>
{
/*000h*/  UINT32 soundPointID;		
/*004h*/  UINT32 soundNameID;		
/*008h*/  float  pos[3];		
/*00Ch*/   		
/*010h*/  		
/*014h*/  float minDistance;	 		
/*018h*/  float maxDistance;	
/*01Ch*/  float cutoffDistance;		
/*020h*/  UINT16 startTime;	
/*022h*/  UINT16 endTime;
/*024h*/  UINT16 groupSilenceMin;		
/*026h*/  UINT16 groupSilenceMax; 	
/*028h*/  UINT16 playInstancesMin;
/*02Ah*/  UINT16 playInstancesMax;	
/*02Ch*/  UINT16 loopCountMin;
/*02Eh*/  UINT16 loopCountMax;
/*030h*/  UINT16 interSoundGapMin;
/*032h*/  UINT16 interSoundGapMax;
/*034h*/  	
} MCSE[];
</pre>
<h3><span class="mw-headline" id="MCBB_.28MoP.2B.29">MCBB (MoP+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=47" title="Edit section: MCBB (MoP+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root</li></ul>
<pre>struct // blend batches. max 256 per MCNK
{
  uint32_t mbmh_index;
  uint32_t indexCount; // MBMI
  uint32_t indexFirst; // in addition to mbmh.mbnv_base
  uint32_t vertexCount; // MBNV 
  uint32_t vertexFirst; // in addition to mbmh.mbnv_base
} MCBB[];
</pre>
<h3><span class="mw-headline" id="MCMT_.28Cata.2B.29">MCMT (Cata+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=48" title="Edit section: MCMT (Cata+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: tex</li></ul>
<pre>struct
{
  uint8_t material_id[4]; // per MCLY, links to <a href="http://www.pxr.dk/wowdev/wiki/index.php?title=TerrainMaterial.dbc" title="TerrainMaterial.dbc">TerrainMaterial.dbc</a>
} MCMT;
</pre>
<h3><span class="mw-headline" id="MCDD_.28Cata.3F.2B.29">MCDD (Cata?+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=49" title="Edit section: MCDD (Cata?+)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li> split files: root?</li></ul>
<pre>struct // at least seen in WoD
{
  // there seems to be a high-res (?) mode which is not taken into account 
  // in live clients (32 bytes instead of 8) (?). if inlined to MCNK is low-res.
  uint1_t disable[8][8];          // disable detail doodads here
  // uint1_t disable[16][16];
} MCDD;
</pre>
<h2><span class="mw-headline" id="MFBO_chunk_.28BC.2B.29">MFBO chunk (BC+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=50" title="Edit section: MFBO chunk (BC+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li>
<li><b>A bounding box for flying.</b></li></ul>
<p>This chunk is a "box" defining, where you can fly and where you 
can't. It also defines the height at which one you will fall into 
nowhere while your camera remains at the same position. Its actually two
 planes with 3*3 coordinates per plane.
</p><p>Therefore the structure is:
</p>
<pre>struct plane{
   short[3][3] height;
};
struct
{
   plane maximum;
   plane minimum;
} MFBO;
</pre>
<h2><span class="mw-headline" id="MTXF_chunk_.28WotLK.2B.29">MTXF chunk (WotLK+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=51" title="Edit section: MTXF chunk (WotLK+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: tex</li></ul>
<p>Array of flags for entries in MTEX. Always same number of entries as MTEX. 
</p>
<pre>struct SMTextureFlags
{
  uint32_t do_not_load_specular_or_height_texture&nbsp;: 1; // probably just 'disable_all_shading'
  uint32_t&nbsp;: 3;                                        // no non-zero values in 20490
  uint32_t texture_scale&nbsp;: 4;                          // MoP+
  uint32_t&nbsp;: 24;                                       // no non-zero values in 20490
} MTXF[];
</pre>
<p>In WotLK this is mostly used for layers using terrain cube maps (e.g.
 crystalsong's "TILESET\\Terrain Cube Maps\\TCB_CrystalSong_A.blp"). 
Without this flag, it would try to load the _s.blp and fail loading.
</p>
<h2><span class="mw-headline" id="MTXP_chunk_.28MoP.3F.2B.29">MTXP chunk (MoP?+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=52" title="Edit section: MTXP chunk (MoP?+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: tex</li></ul>
<pre>struct SMTextureParams
{
  SMTextureFlags flags; // same as in mtxf (or taken from there if no mtxp present)
  float height;         // default 0.0 -- the _h texture values are scaled to [0, value) to determine actual "height".
                        // this determines if textures overlap or not (e.g. roots on top of roads)
  float unk2;           // default 1.0 -- some kind of weight
  uint32_t unk3;        // padding? (no default, no non-zero values in 20490)
} MTXP[];
</pre>
<p>If unk1 == 0.0 and unk2 == 1.0, it will not load a _h texture.
</p>
<h2><span class="mw-headline" id="MBMH_.28MoP.2B.29">MBMH (MoP+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=53" title="Edit section: MBMH (MoP+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li>
<li> there can be multiple entries per map object (as different textures are possible)</li></ul>
<pre>struct // blend mesh header
{
  uint32_t mapObjectID; // (unique ID)
  uint32_t textureId; // of linked WMO
  char unknown[0xc];
  uint32_t mbmi_base; // first index into MBMI for this mesh
  uint32_t mbnv_base; // first index into MBNV for this mesh
} MBMH[];
</pre>
<h2><span class="mw-headline" id="MBBB_.28MoP.2B.29">MBBB (MoP+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=54" title="Edit section: MBBB (MoP+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li>
<li> each one corresponds to a MBMH entry of same index</li></ul>
<pre>struct // blend mesh bounding boxes
{
  uint32_t mapObjectID; // (unique ID) -- repeated for unknown reason
  CAaBox bounding;
} MBBB[];
</pre>
<h2><span class="mw-headline" id="MBNV_.28MoP.2B.29">MBNV (MoP+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=55" title="Edit section: MBNV (MoP+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li></ul>
<pre>struct // blend mesh vertices
{
  C3Vector pos;
  C3Vector normal;
  C2Vector texture_coordinates;
  CArgb color[3]; // used: PN: none; PNC: 0; PNC2: 0, 1; PNC2T: 0, 2
} MBNV[];
</pre>
<h2><span class="mw-headline" id="MBMI_.28MoP.2B.29">MBMI (MoP+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=56" title="Edit section: MBMI (MoP+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: root</li></ul>
<pre>struct // blend mesh indices
{
  uint16_t index;
} MBMI[];
</pre>
<h2><span class="mw-headline" id="MAMP_.28Cata.2B.29">MAMP (Cata+)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit&amp;section=57" title="Edit section: MAMP (Cata+)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li> split files: tex</li></ul>
<pre>struct
{
  char fred; // texture_size = 64 / (2^mamp_value). either defined here or in MHDR.mamp_value. 
} mamp;
</pre>
<p>Partitially retrieved from "<a rel="nofollow" class="external free" href="http://wowdev.org/wiki/index.php/ADT">http://wowdev.org/wiki/index.php/ADT</a>"
</p>
<!-- 
NewPP limit report
CPU time usage: 0.080 seconds
Real time usage: 0.086 seconds
Preprocessor visited node count: 227/1000000
Preprocessor generated node count: 232/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key pxr_dk-wikki:pcache:idhash:3-0!*!0!!en!*!* and timestamp 20151104084214 and revision id 19096
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;oldid=19096">http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;oldid=19096</a>"</div>
					<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:Format" title="Category:Format">Format</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18" title="View the content page [Alt+Shift+c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Talk:ADT/v18&amp;action=edit&amp;redlink=1" title="Discussion about the content page [Alt+Shift+t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=edit" title="You can edit this page. Please use the preview button before saving [Alt+Shift+e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=history" rel="archives" title="Past revisions of this page [Alt+Shift+h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-login"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:UserLogin&amp;returnto=ADT%2Fv18" title="You are encouraged to log in; however, it is not mandatory [Alt+Shift+o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Main_Page" style="background-image: url(/wowdev/wiki/resources/assets/wiki.png);" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class="pBody">
							<ul>
											<li id="n-mainpage-.2F-full-list"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Main_Page">mainpage / full list</a></li>
											<li id="n-recentchanges"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:RecentChanges" title="A list of recent changes in the wiki [Alt+Shift+r]" accesskey="r">Recent changes</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-world-related" role="navigation">
		<h3>world-related</h3>
		<div class="pBody">
							<ul>
											<li id="n-ADT"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18">ADT</a></li>
											<li id="n-WDT"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDT">WDT</a></li>
											<li id="n-WDL"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDL">WDL</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-model-related" role="navigation">
		<h3>model-related</h3>
		<div class="pBody">
							<ul>
											<li id="n-M2-.3C.3D-BC"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=M2">M2 &lt;= BC</a></li>
											<li id="n-M2-.3E-BC"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=M2/WotLK">M2 &gt; BC</a></li>
											<li id="n-WMO-.3E.3D-Vanilla"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WMO">WMO &gt;= Vanilla</a></li>
											<li id="n-WMO-.3C-Vanilla"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WMO/v14">WMO &lt; Vanilla</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-database-related" role="navigation">
		<h3>database-related</h3>
		<div class="pBody">
							<ul>
											<li id="n-DBC"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=DBC">DBC</a></li>
											<li id="n-DB2"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=DB2">DB2</a></li>
											<li id="n-WDB"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WDB">WDB</a></li>
											<li id="n-tables"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC">tables</a></li>
											<li id="n-tables-.3D.3D-Vanilla"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC_Vanilla">tables == Vanilla</a></li>
											<li id="n-tables-.3D.3D-BC"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC_BC">tables == BC</a></li>
											<li id="n-tables-.3D.3D-WotLK"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC_WotLK">tables == WotLK</a></li>
											<li id="n-tables-.3D.3D-Cataclysm"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC_Cataclysm">tables == Cataclysm</a></li>
											<li id="n-tables-.3D.3D-MoP"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC_MoP">tables == MoP</a></li>
											<li id="n-tables-.3D.3D-WoD"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:DBC_WoD">tables == WoD</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-various" role="navigation">
		<h3>various</h3>
		<div class="pBody">
							<ul>
											<li id="n-BLP"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=BLP">BLP</a></li>
											<li id="n-BLS"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=BLS">BLS</a></li>
											<li id="n-TEX-.28Cata.2B.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=TEX/v0">TEX (Cata+)</a></li>
											<li id="n-Model.blob-.28Cata.2B.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Cataclysm#Model.blob_.28new.29">Model.blob (Cata+)</a></li>
											<li id="n-TRS"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=TRS">TRS</a></li>
											<li id="n-random-.3D.3D-Cataclysm"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Cataclysm">random == Cataclysm</a></li>
											<li id="n-random-.3C-Vanilla"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Alpha">random &lt; Vanilla</a></li>
											<li id="n-documentation-of-client-functions.2C-datastructures"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:Client">documentation of client functions, datastructures</a></li>
											<li id="n-ADT-.3D.3D-WoWEdit"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v23">ADT == WoWEdit</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-by_client_revision" role="navigation">
		<h3>by client revision</h3>
		<div class="pBody">
							<ul>
											<li id="n-8606-.282.4.3.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:2.4.3.8606">8606 (2.4.3)</a></li>
											<li id="n-8905-.283.0.2.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:3.0.2.8905">8905 (3.0.2)</a></li>
											<li id="n-9183-.283.0.3.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:3.0.3.9183">9183 (3.0.3)</a></li>
											<li id="n-9294-.283.0.5.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:3.0.5.9294">9294 (3.0.5)</a></li>
											<li id="n-9506-.283.0.8.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:3.0.8.9506">9506 (3.0.8)</a></li>
											<li id="n-9551-.283.0.9.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:3.0.9.9551">9551 (3.0.9)</a></li>
											<li id="n-12340-.283.3.5a.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:3.3.5.12340">12340 (3.3.5a)</a></li>
											<li id="n-13329-.284.0.3.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:4.0.3.13329">13329 (4.0.3)</a></li>
											<li id="n-18179-.286.0.1.29"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Category:6.0.1.18179">18179 (6.0.1)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="/wowdev/wiki/index.php" id="searchform">
					<input name="title" value="Special:Search" type="hidden">
					<input autocomplete="off" name="search" placeholder="Search" title="Search WoWDev [Alt+Shift+f]" accesskey="f" id="searchInput" type="search">
					<input name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" type="submit">&nbsp;
						<input name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" type="submit">
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:WhatLinksHere/ADT/v18" title="A list of all wiki pages that link here [Alt+Shift+j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:RecentChangesLinked/ADT/v18" title="Recent changes in pages linked from this page [Alt+Shift+k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=Special:SpecialPages" title="A list of all special pages [Alt+Shift+q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;printable=yes" rel="alternate" title="Printable version of this page [Alt+Shift+p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;oldid=19096" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=ADT/v18&amp;action=info">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="ADT_v18%20-%20WoWDev_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" height="31" width="88"></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 24 October 2015, at 21:45.</li>
									<li id="viewcount">This page has been accessed 162,623 times.</li>
									<li id="privacy"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WoWDev:Privacy_policy" title="WoWDev:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WoWDev:About" title="WoWDev:About">About WoWDev</a></li>
									<li id="disclaimer"><a href="http://www.pxr.dk/wowdev/wiki/index.php?title=WoWDev:General_disclaimer" title="WoWDev:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"ready","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":328});
}</script><div class="suggestions" style="display: none; font-size: 11.4667px;"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>